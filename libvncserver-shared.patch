--- LibVNCServer-0.6/test/Makefile.am.orig	2003-07-28 15:01:09.000000000 +0200
+++ LibVNCServer-0.6/test/Makefile.am	2003-11-28 19:18:50.178882400 +0100
@@ -1,6 +1,6 @@
-CFLAGS=-I.. -g -Wall
+AM_CFLAGS=-I.. -Wall
 
 noinst_PROGRAMS=tight-1
 
-LDADD = ../libvncserver.a ../libvncclient/libvncclient.a
+LDADD = ../libvncserver.la ../libvncclient/libvncclient.la
 
--- LibVNCServer-0.6/contrib/Makefile.am.orig	2003-02-20 15:23:11.000000000 +0100
+++ LibVNCServer-0.6/contrib/Makefile.am	2003-11-28 19:17:41.695293488 +0100
@@ -1,5 +1,5 @@
 CFLAGS = -I ..
-LDADD = ../libvncserver.a
+LDADD = ../libvncserver.la
 
 noinst_PROGRAMS=zippy
 
--- LibVNCServer-0.6/libvncclient/Makefile.am.orig	2003-07-28 15:01:09.000000000 +0200
+++ LibVNCServer-0.6/libvncclient/Makefile.am	2003-11-28 19:18:30.941806880 +0100
@@ -1,6 +1,6 @@
-CFLAGS=-g -I.. -I. -Wall
+AM_CFLAGS=-I.. -I. -Wall
 
-libvncclient_a_SOURCES=cursor.c listen.c rfbproto.c sockets.c vncviewer.c
+libvncclient_la_SOURCES=cursor.c listen.c rfbproto.c sockets.c vncviewer.c
 
 rfbproto.o: rfbproto.c corre.c hextile.c rre.c tight.c zlib.c
 
@@ -8,11 +8,11 @@
 
 $(libvncclient_a_OBJECTS): ../rfb/rfbclient.h
 
-lib_LIBRARIES=libvncclient.a
+lib_LTLIBRARIES=libvncclient.la
 
 client_test_SOURCES=client_test.c
 
 noinst_PROGRAMS=client_test
 
 #client_test_LDADD=libvncclient.a ../libvncserver.a
-client_test_LDADD=libvncclient.a
+client_test_LDADD=libvncclient.la
--- LibVNCServer-0.6/vncterm/Makefile.am.orig	2003-02-20 15:23:11.000000000 +0100
+++ LibVNCServer-0.6/vncterm/Makefile.am	2003-11-28 19:19:27.268243960 +0100
@@ -2,9 +2,9 @@
 
 noinst_HEADERS=VNConsole.h vga.h
 
-CFLAGS=-I..
+AM_CFLAGS=-I..
 
-LDADD=../libvncserver.a
+LDADD=../libvncserver.la
 INCLUDES=-I. -I../include
 
 if LINUX
--- LibVNCServer-0.6/examples/Makefile.am.orig	2003-08-18 11:25:23.000000000 +0200
+++ LibVNCServer-0.6/examples/Makefile.am	2003-11-28 19:18:03.278012416 +0100
@@ -1,4 +1,4 @@
-CFLAGS=-I.. -g -Wall
+AM_CFLAGS=-I.. -Wall
 
 if HAVE_LIBPTHREAD
 BACKGROUND_TEST=blooptest
@@ -14,5 +14,5 @@
 noinst_PROGRAMS=example pnmshow regiontest pnmshow24 fontsel \
 	vncev storepasswd colourmaptest simple simple15 $(BACKGROUND_TEST) $(MAC)
 
-LDADD = ../libvncserver.a
+LDADD = ../libvncserver.la
 
--- LibVNCServer-0.6/configure.ac.orig	2003-10-26 20:23:41.000000000 +0100
+++ LibVNCServer-0.6/configure.ac	2003-11-28 19:16:37.031123936 +0100
@@ -12,7 +12,7 @@
 	CCLD="$CC"
 fi
 AC_PROG_MAKE_SET
-AC_PROG_RANLIB
+AC_PROG_LIBTOOL
 
 # Options
 AH_TEMPLATE(BACKCHANNEL, [Enable BackChannel communication])
@@ -95,8 +95,8 @@
 AC_FUNC_STRFTIME
 AC_FUNC_VPRINTF
 AC_FUNC_FORK
-AC_CHECK_LIB(nsl,gethostbyname)
-AC_CHECK_LIB(socket,socket)
+AC_SEARCH_LIBS(gethostbyname,nsl)
+AC_SEARCH_LIBS(socket,socket)
 AC_CHECK_FUNCS([ftime gethostbyname gethostname gettimeofday inet_ntoa memmove memset mkfifo select socket strchr strcspn strdup strerror strstr setsid])
 
 # Check if /dev/vcsa1 exists, if so, define LINUX
--- LibVNCServer-0.6/Makefile.am.orig	2003-09-08 23:22:56.000000000 +0200
+++ LibVNCServer-0.6/Makefile.am	2003-11-28 19:17:22.142266000 +0100
@@ -1,4 +1,4 @@
-CFLAGS=-g -Wall
+AM_CFLAGS=-Wall
 
 SUBDIRS=. examples contrib vncterm classes libvncclient test
 DIST_SUBDIRS=examples contrib vncterm classes libvncclient test
@@ -24,9 +24,9 @@
 	draw.c selbox.c d3des.c vncauth.c cargs.c \
 	zrle.c zrleoutstream.c zrlepalettehelper.c
 
-libvncserver_a_SOURCES=$(LIB_SRCS)
+libvncserver_la_SOURCES=$(LIB_SRCS)
 
-lib_LIBRARIES=libvncserver.a
+lib_LTLIBRARIES=libvncserver.la
 
 if HAVE_RPM
 $(PACKAGE)-$(VERSION).tar.gz: dist
